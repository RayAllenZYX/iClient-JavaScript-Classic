<!DOCTYPE>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>单值专题图</title>
    <style type="text/css">
        body {
            margin: 0;
            overflow: hidden;
            background: #fff;
        }

        #map {
            position: relative;
            height: 510px;
            border: 1px solid #3473b7;
        }

        #toolbar {
            position: relative;
            padding-top: 5px;
            padding-bottom: 10px;
        }
    </style>
    <link href='./css/bootstrap.min.css' rel='stylesheet'/>
    <link href='./css/bootstrap-responsive.min.css' rel='stylesheet'/>
    <script src='../libs/SuperMap.Include.js'></script>
    <script type="text/javascript">
        var map, local, baseLayer, layersID, themeLayer,
                host = document.location.toString().match(/file:\/\//)?"http://localhost:8090":'http://' + document.location.host,
                url = host + "/iserver/services/map-china400/rest/maps/China";
        function init() {
            map = new SuperMap.Map("map", {
                controls: [
                    new SuperMap.Control.LayerSwitcher(),
                    new SuperMap.Control.ScaleLine(),
                    new SuperMap.Control.Zoom(),
                    new SuperMap.Control.Navigation({
                        dragPanOptions: {
                            enableKinetic: true
                        }
                    })]
            });
            baseLayer = new SuperMap.Layer.TiledDynamicRESTLayer("China400", url, {
                transparent: true,
                cacheEnabled: true
            }, {maxResolution: "auto"});
            baseLayer.events.on({"layerInitialized": addLayer});
        }

        function addLayer() {
            map.addLayer(baseLayer);
            map.setCenter(new SuperMap.LonLat(12080677, 4591416), 4);
            map.allOverlays = true;
        }
        function addThemeUnique() {
            removeTheme();
            var themeService = new SuperMap.REST.ThemeService(url, {
                eventListeners: {
                    "processCompleted": themeCompleted,
                    "processFailed": themeFailed
                }
            });
            var style1, style2, style3, style4, style5, style6;
                    style1 = new SuperMap.REST.ServerTextStyle({
                        fontHeight: 4,
                        foreColor: new SuperMap.REST.ServerColor(0, 144, 152),
                        sizeFixed: true,
                        bold: true

                    }),
                    style2 = new SuperMap.REST.ServerTextStyle({
                        fontHeight: 4,
                        foreColor: new SuperMap.REST.ServerColor(168, 209, 118),
                        sizeFixed: true,
                        bold: true
                    }),
                    style3 = new SuperMap.REST.ServerTextStyle({
                        fontHeight: 4,
                        foreColor: new SuperMap.REST.ServerColor(215, 231, 163),
                        sizeFixed: true,
                        bold: true
                    }),
                    style4 = new SuperMap.REST.ServerTextStyle({
                        fontHeight: 4,
                        foreColor: new SuperMap.REST.ServerColor(97, 93, 189),
                        sizeFixed: true,
                        bold: true

                    }),
                    style5 = new SuperMap.REST.ServerTextStyle({
                        fontHeight: 4,
                        foreColor: new SuperMap.REST.ServerColor(243, 169, 194),
                        sizeFixed: true,
                        bold: true
                    }),
                    style6 = new SuperMap.REST.ServerTextStyle({
                        fontHeight: 4,
                        foreColor: new SuperMap.REST.ServerColor(214, 0, 111),
                        sizeFixed: true,
                        bold: true
                    });


            var themeUniqueIteme1 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "黑龙江省",
                        style: style1
                    }),
                    themeUniqueIteme2 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "湖北省",
                        style: style2
                    }),
                    themeUniqueIteme3 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "吉林省",
                        style: style3
                    }),
                    themeUniqueIteme4 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "内蒙古自治区",
                        style: style4
                    }),
                    themeUniqueIteme5 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "青海省",
                        style: style5
                    }),
                    themeUniqueIteme6 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "新疆维吾尔自治区",
                        style: style6
                    }),
                    themeUniqueIteme7 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "云南省",
                        style: style1
                    }),
                    themeUniqueIteme8 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "四川省",
                        style: style4
                    }),
                    themeUniqueIteme9 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "贵州省",
                        style: style3
                    }),
                    themeUniqueIteme10 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "甘肃省",
                        style: style3
                    }),
                    themeUniqueIteme11 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "宁夏回族自治区",
                        style: style5
                    }),
                    themeUniqueIteme12 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "重庆市",
                        style: style6
                    }),
                    themeUniqueIteme13 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "山东省",
                        style: style1
                    }),
                    themeUniqueIteme14 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "安徽省",
                        style: style2
                    }),
                    themeUniqueIteme15 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "江西省",
                        style: style3
                    }),
                    themeUniqueIteme16 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "浙江省",
                        style: style4
                    }),
                    themeUniqueIteme17 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "台湾省",
                        style: style2
                    }),
                    themeUniqueIteme18 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "江苏省",
                        style: style6
                    }),
                    themeUniqueIteme19 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "湖南省",
                        style: style5
                    }),
                    themeUniqueIteme20 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "河南省",
                        style: style4
                    }),
                    themeUniqueIteme21 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "河北省",
                        style: style3
                    }),
                    themeUniqueIteme22 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "福建省",
                        style: style5
                    }),
                    themeUniqueIteme23 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "广西壮族自治区",
                        style: style6
                    }),
                    themeUniqueIteme24 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "西藏自治区",
                        style: style2
                    }),
                    themeUniqueIteme25 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "广东省",
                        style: style4
                    }),
                    themeUniqueIteme26 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "山西省",
                        style: style2
                    }),
                    themeUniqueIteme27 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "陕西省",
                        style: style1
                    }),
                    themeUniqueIteme28 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "天津市",
                        style: style5
                    }),
                    themeUniqueIteme29 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "北京市",
                        style: style2
                    }),

                    themeUniqueIteme30 = new SuperMap.REST.ThemeLabelUniqueItem({
                        unique: "辽宁省",
                        style: style1
                    });

            var themeUniqueItemes = [themeUniqueIteme1, themeUniqueIteme2, themeUniqueIteme3, themeUniqueIteme4, themeUniqueIteme5, themeUniqueIteme6, themeUniqueIteme7, themeUniqueIteme8, themeUniqueIteme9, themeUniqueIteme10, themeUniqueIteme11, themeUniqueIteme12, themeUniqueIteme13, themeUniqueIteme14, themeUniqueIteme15, themeUniqueIteme16, themeUniqueIteme17, themeUniqueIteme18, themeUniqueIteme19, themeUniqueIteme20, themeUniqueIteme21, themeUniqueIteme22, themeUniqueIteme23, themeUniqueIteme24, themeUniqueIteme25, themeUniqueIteme26, themeUniqueIteme27, themeUniqueIteme28, themeUniqueIteme29, themeUniqueIteme30];

            var themeUnique = new SuperMap.REST.ThemeLabel({
                uniqueExpression: "Name",
                labelExpression: "Name",
                uniqueItems: themeUniqueItemes,
                defaultStyle: style1
            });
            themeParameters = new SuperMap.REST.ThemeParameters({
                datasetNames: ["China_Province_pg"],
                dataSourceNames: ["China"],
                themes: [themeUnique],
                types:['REGION']
            });

            themeService.processAsync(themeParameters);
        }

        function themeCompleted(themeEventArgs) {
            if (themeEventArgs.result.resourceInfo.id) {
                themeLayer = new SuperMap.Layer.TiledDynamicRESTLayer("中国行政区划_专题图", url, {
                    cacheEnabled: false,
                    transparent: true,
                    layersID: themeEventArgs.result.resourceInfo.id
                }, {"maxResolution": "auto"});
                themeLayer.events.on({"layerInitialized": addThemeLayer});
            }
        }
        function addThemeLayer() {
            map.addLayer(themeLayer);
        }

        function themeFailed(serviceFailedEventArgs) {
//doMapAlert("",serviceFailedEventArgs.error.errorMsg,true);
            alert(serviceFailedEventArgs.error.errorMsg);
        }

        function removeTheme() {
            if (map.layers.length > 1) {
                map.removeLayer(themeLayer, true);
            }
        }
    </script>
</head>
<body onload="init()">
<div id="toolbar">
    <input type="button" class="btn" value="创建专题图" onclick="addThemeUnique()"/>
    <input type="button" class="btn" value="移除专题图" onclick="removeTheme()"/>
</div>
<div id="map"></div>
</body>
</html>